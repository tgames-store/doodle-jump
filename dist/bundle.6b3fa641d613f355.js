(()=>{window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};var t=document.getElementById("canvas"),i=t.getContext("2d");document.getElementById("start").addEventListener("click",B),document.getElementById("reset").addEventListener("click",k);const e=document.querySelector(".btn-container"),h=Math.min(window.innerWidth,422),n=window.innerHeight;t.width=h,t.height=n,window.addEventListener("resize",(()=>{t.width=window.screen.width,t.height=window.screen.height}));var s,d,a,o=[],y=document.getElementById("sprite"),c=0,r=.2,g=0,v=0,l=0,u=!0,m=function(){this.height=5,this.width=h,this.cx=0,this.cy=614,this.cwidth=100,this.cheight=5,this.moved=0,this.x=0,this.y=n-this.height,this.draw=function(){try{i.drawImage(y,this.cx,this.cy,this.cwidth,this.cheight,this.x,this.y,this.width,this.height)}catch(t){}}},w=new m,f=function(){this.vy=11,this.vx=0,this.isMovingLeft=!1,this.isMovingRight=!1,this.isDead=!1,this.width=55,this.height=40,this.cx=0,this.cy=0,this.cwidth=110,this.cheight=80,this.dir="left",this.x=h/2-this.width/2,this.y=n,this.draw=function(){try{"right"==this.dir?this.cy=121:"left"==this.dir?this.cy=201:"right_land"==this.dir?this.cy=289:"left_land"==this.dir&&(this.cy=371),i.drawImage(y,this.cx,this.cy,this.cwidth,this.cheight,this.x,this.y,this.width,this.height)}catch(t){}},this.jump=function(){this.vy=-8},this.jumpHigh=function(){this.vy=-16}};function x(){this.width=70,this.height=17,this.x=Math.random()*(h-this.width),this.y=c,c+=n/10,this.flag=0,this.state=0,this.cx=0,this.cy=0,this.cwidth=105,this.cheight=31,this.draw=function(){try{1==this.type?this.cy=0:2==this.type?this.cy=61:3==this.type&&0===this.flag?this.cy=31:3==this.type&&1==this.flag?this.cy=1e3:4==this.type&&0===this.state?this.cy=90:4==this.type&&1==this.state&&(this.cy=1e3),i.drawImage(y,this.cx,this.cy,this.cwidth,this.cheight,this.x,this.y,this.width,this.height)}catch(t){}},this.types=l>=5e3?[2,3,3,3,4,4,4,4]:l>=2e3&&l<5e3?[2,2,2,3,3,3,3,4,4,4,4]:l>=1e3&&l<2e3?[2,2,2,3,3,3,3,3]:l>=500&&l<1e3?[1,1,1,1,1,2,2,2,2,3,3,3,3]:l>=100&&l<500?[1,1,1,1,2,2]:[1],this.type=this.types[Math.floor(Math.random()*this.types.length)],3==this.type&&v<1?v++:3==this.type&&v>=1&&(this.type=1,v=0),this.moved=0,this.vx=1}s=new f;for(var p=0;p<10;p++)o.push(new x);var E=function(){this.height=30,this.width=70,this.x=0,this.y=0,this.cx=0,this.cy=554,this.cwidth=105,this.cheight=60,this.appearance=!1,this.draw=function(){try{if(!0!==this.appearance)return;i.drawImage(y,this.cx,this.cy,this.cwidth,this.cheight,this.x,this.y,this.width,this.height)}catch(t){}}},M=new E,I=function(){this.x=0,this.y=0,this.width=26,this.height=30,this.cx=0,this.cy=0,this.cwidth=45,this.cheight=53,this.state=0,this.draw=function(){try{0===this.state?this.cy=445:1==this.state&&(this.cy=501),i.drawImage(y,this.cx,this.cy,this.cwidth,this.cheight,this.x,this.y,this.width,this.height)}catch(t){}}},L=new I;function B(){tgames.gameStarted();let t="left",a=0;const y=document.getElementById("left-btn"),c=document.getElementById("right-btn");function v(i){var e=i.keyCode;37==e?(t="left",s.isMovingLeft=!0):39==e&&(t="right",s.isMovingRight=!0),32==e&&(!0===u?B():k())}function m(i){var e=i.keyCode;37==e?(t="left",s.isMovingLeft=!1):39==e&&(t="right",s.isMovingRight=!1)}function f(i,e){i.preventDefault(),"left"===e?(y.style.background="red",t="left",s.isMovingLeft=!0):"right"===e&&(c.style.background="red",t="right",s.isMovingRight=!0)}function p(i,e){i.preventDefault(),"left"===e?(y.style.background="darkgrey",t="left",s.isMovingLeft=!1):"right"===e&&(c.style.background="darkgrey",t="right",s.isMovingRight=!1)}function E(){var d,u,E,I;i.clearRect(0,0,h,n),d=M,o.forEach((function(t,i){2==t.type&&((t.x<0||t.x+t.width>h)&&(t.vx*=-1),t.x+=t.vx),1==t.flag&&!1===d.appearance&&0===a&&(d.x=t.x,d.y=t.y,d.appearance=!0,a++),t.draw()})),!0===d.appearance&&(d.draw(),d.y+=8),d.y>n&&(d.appearance=!1),u=L,1==(E=o[0]).type||2==E.type?(u.x=E.x+E.width/2-u.width/2,u.y=E.y-E.height-10,u.y>n/1.1&&(u.state=0),u.draw()):(u.x=0-u.width,u.y=0-u.height),"left"==t?(s.dir="left",s.vy<-7&&s.vy>-15&&(s.dir="left_land")):"right"==t&&(s.dir="right",s.vy<-7&&s.vy>-15&&(s.dir="right_land")),document.onkeydown=v,document.onkeyup=m,y.addEventListener("touchstart",(t=>f(t,"left"))),c.addEventListener("touchstart",(t=>f(t,"right"))),y.addEventListener("touchend",(t=>p(t,"left"))),c.addEventListener("touchend",(t=>p(t,"right"))),!0===s.isMovingLeft?(s.x+=s.vx,s.vx-=.15):(s.x+=s.vx,s.vx<0&&(s.vx+=.1)),!0===s.isMovingRight?(s.x+=s.vx,s.vx+=.15):(s.x+=s.vx,s.vx>0&&(s.vx-=.1)),s.y+s.height>w.y&&w.y<n&&s.jump(),w.y>n&&s.y+s.height>n&&"lol"!=s.isDead&&(s.isDead=!0),s.x>h?s.x=0-s.width:s.x<0-s.width&&(s.x=h),Math.ceil(s.y)>=Math.floor(n/2-s.height/2)?(s.y+=s.vy,s.vy+=r):(o.forEach((function(t,i){s.vy<0&&(t.y-=s.vy),t.y>n&&(o[i]=new x,o[i].y=t.y-n)})),w.y-=s.vy,s.vy+=r,s.vy>=0&&(s.y+=s.vy,s.vy+=r),Math.ceil(s.y+2)>=Math.floor(n/2-s.height/2)||l++),function(){o.forEach((function(t,i){if(s.vy>0&&0===t.state&&s.x+15<t.x+t.width&&s.x+s.width-15>t.x&&s.y+s.height>t.y&&s.y+s.height<t.y+t.height){if(3==t.type&&0===t.flag)return t.flag=1,void(a=0);if(4==t.type&&0===t.state)s.jump(),t.state=1;else{if(1==t.flag)return;s.jump()}}}));var t=L;s.vy>0&&0===t.state&&s.x+15<t.x+t.width&&s.x+s.width-15>t.x&&s.y+s.height>t.y&&s.y+s.height<t.y+t.height&&(t.state=1,s.jumpHigh())}(),!0===s.isDead&&(tgames.gameOver(l),tgames.showRewardedAd(),e.style.display="none",o.forEach((function(t,i){t.y-=12})),s.y>n/2&&0===g?(s.y-=8,s.vy=0):s.y<n/2?g=1:s.y+s.height>n&&((I=document.getElementById("gameOverMenu")).style.zIndex=1,I.style.visibility="visible",document.getElementById("go_score").innerHTML="Ваш результат "+l+" очков!",document.getElementById("scoreBoard").style.zIndex=-1,s.isDead="lol")),s.draw(),w.draw(),document.getElementById("score").innerHTML=l}e.style.display="flex",u=!1,menuLoop=function(){},(d=function(){E(),requestAnimFrame(d)})(),document.getElementById("mainMenu").style.zIndex=-1,R()}function k(){var t;tgames.gameStarted(),e.style.display="flex",(t=document.getElementById("gameOverMenu")).style.zIndex=-1,t.style.visibility="hidden",R(),s.isDead=!1,g=0,c=0,l=0,w=new m,s=new f,L=new I,M=new E,o=[];for(var i=0;i<10;i++)o.push(new x)}function R(){document.getElementById("scoreBoard").style.zIndex=1}menuLoop=function(){i.clearRect(0,0,h,n),s.y+=s.vy,s.vy+=r,s.vy>0&&s.x+15<260&&s.x+s.width-15>155&&s.y+s.height>475&&s.y+s.height<500&&s.jump(),"left"==a?(s.dir="left",s.vy<-7&&s.vy>-15&&(s.dir="left_land")):"right"==a&&(s.dir="right",s.vy<-7&&s.vy>-15&&(s.dir="right_land")),document.onkeydown=function(t){var i=t.keyCode;37==i?(a="left",s.isMovingLeft=!0):39==i&&(a="right",s.isMovingRight=!0),32==i&&(!0===u?(B(),u=!1):k())},document.onkeyup=function(t){var i=t.keyCode;37==i?(a="left",s.isMovingLeft=!1):39==i&&(a="right",s.isMovingRight=!1)},!0===s.isMovingLeft?(s.x+=s.vx,s.vx-=.15):(s.x+=s.vx,s.vx<0&&(s.vx+=.1)),!0===s.isMovingRight?(s.x+=s.vx,s.vx+=.15):(s.x+=s.vx,s.vx>0&&(s.vx-=.1)),s.y+s.height>w.y&&w.y<n&&s.jump(),s.x>h?s.x=0-s.width:s.x<0-s.width&&(s.x=h),s.draw(),requestAnimFrame(menuLoop)},menuLoop();let b=!1;function D(t){if(!b)return;let i=t.alpha,e=t.beta,h=t.gamma;console.log("device!"),document.getElementById("alpha").innerHTML=`alpha - ${i}`,document.getElementById("betta").innerHTML=`gamma - ${e}`,document.getElementById("gamma").innerHTML=`betta - ${h}`}window.DeviceOrientationEvent&&"undefined"!=typeof DeviceOrientationEvent&&"function"==typeof DeviceOrientationEvent.requestPermission&&document.getElementById("alpha").addEventListener("click",(function(){DeviceOrientationEvent.requestPermission().then((t=>{alert(t),"granted"==t&&(b=!0,window.addEventListener("deviceorientation",D,!1))})).catch((t=>console.log(t)))}))})();
//# sourceMappingURL=bundle.6b3fa641d613f355.js.map